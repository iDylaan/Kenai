import{B as y,s as b}from"./basecomponent.esm-JWnRpRyX.js";import{o as n,c as i,m as u,s as k,f as d,a as l,u as f,t as h,Q as w,g as p,_ as B,i as g,G as v,d as I,R as N,p as V,q as $,S as O}from"./index-DET4aNsS.js";import{s as P}from"./avatar.esm-DHM3Q9jD.js";var T={root:function(a){var o=a.instance;return["p-progressbar p-component",{"p-progressbar-determinate":o.determinate,"p-progressbar-indeterminate":o.indeterminate}]},container:"p-progressbar-indeterminate-container",value:"p-progressbar-value p-progressbar-value-animate",label:"p-progressbar-label"},E=y.extend({name:"progressbar",classes:T}),A={name:"BaseProgressBar",extends:b,props:{value:{type:Number,default:null},mode:{type:String,default:"determinate"},showValue:{type:Boolean,default:!0}},style:E,provide:function(){return{$parentInstance:this}}},S={name:"ProgressBar",extends:A,inheritAttrs:!1,computed:{progressStyle:function(){return{width:this.value+"%",display:"flex"}},indeterminate:function(){return this.mode==="indeterminate"},determinate:function(){return this.mode==="determinate"}}},C=["aria-valuenow"];function J(e,a,o,c,m,s){return n(),i("div",u({role:"progressbar",class:e.cx("root"),"aria-valuemin":"0","aria-valuenow":e.value,"aria-valuemax":"100"},e.ptmi("root")),[s.determinate?(n(),i("div",u({key:0,class:e.cx("value"),style:s.progressStyle},e.ptm("value")),[e.value!=null&&e.value!==0&&e.showValue?(n(),i("div",u({key:0,class:e.cx("label")},e.ptm("label")),[k(e.$slots,"default",{},function(){return[f(h(e.value+"%"),1)]})],16)):d("",!0)],16)):d("",!0),s.indeterminate?(n(),i("div",u({key:1,class:e.cx("container")},e.ptm("container")),[l("div",u({class:e.cx("value")},e.ptm("value")),null,16)],16)):d("",!0)],16,C)}S.render=J;const U=w("session",()=>{const e=p(null),a=p(null);return{user:e,token:a,login:async s=>{try{const t=await fetch("/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!t.ok)throw new Error(t.statusText);const r=await t.json();if(!r.success)throw new Error(r.error.message);return e.value=r.data.user,a.value=r.data.token,localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user)),r.success}catch(t){throw console.error("Error al iniciar sesiÃ³n:",t),t.message}},logout:()=>{e.value=null,a.value=null,localStorage.removeItem("token"),localStorage.removeItem("user")},loadSession:()=>{const s=localStorage.getItem("user"),t=localStorage.getItem("token");s&&t&&(e.value=JSON.parse(s),a.value=t)}}}),j=e=>(V("data-v-b2b9f9f4"),e=e(),$(),e),x={class:"sso-main"},D={class:"sso__container"},R=j(()=>l("section",{class:"title__container"},[l("span",{class:"material-icons"},"person"),l("h1",{class:"title__text"},"Login")],-1)),q={class:"form__container"},G={key:0,class:"authed__container"},L={class:"footer__container"},Q={__name:"SSOView",setup(e){const a=U(),o=p(!1),c=p(!1),m=async s=>{o.value=!0;const t=O(s.credential),r=await a.login(t);console.log(typeof r),typeof r=="boolean"?c.value=r:c.value=!1,o.value=!1};return(s,t)=>{const r=P,_=S;return n(),i("main",x,[l("div",D,[R,l("section",q,[g(v(N),{callback:m}),c.value?(n(),i("div",G,[f(h(v(a).user.name)+" ",1),g(r,{src:v(a).user.imageUrl,alt:"User Avatar"},null,8,["src"])])):d("",!0)]),l("section",L,[o.value?(n(),I(_,{key:0,mode:"indeterminate",style:{height:"6px"}})):d("",!0)])])])}}},K=B(Q,[["__scopeId","data-v-b2b9f9f4"]]);export{K as default};
